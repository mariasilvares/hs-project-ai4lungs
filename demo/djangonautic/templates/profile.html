{% extends 'base_layout.html' %}

{% load static %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-picture">
            <!-- Exemplo de imagem de perfil -->
            {% if user.userprofile.profile_picture %}
                <img src="{{ user.userprofile.profile_picture.url }}" alt="Foto de perfil">
            {% else %}
                <img src="{% static 'default-profile.png' %}" alt="Imagem padrÃ£o">
            {% endif %}
        </div>
        <div class="profile-info">
            <h2>{{ user.username }}</h2>
            <p>Email: {{ user.email }}</p>
            <p>Membro desde: {{ user.date_joined|date:"F j, Y" }}</p>
        </div>
    </div>

    <div class="profile-actions">
        <a href="{% url 'accounts:profile_edit' %}" class="btn">Editar Perfil</a>
        <a href="{% url 'change_password' %}" class="btn">Alterar Senha</a>
        <form action="{% url 'accounts:logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn logout-btn">Logout</button>
        </form>
    </div>

    <div class="activity-history">
        <h3>Atividades Recentes</h3>
        <ul>
            {% for activity in user.activity_set.all|slice:":5" %}
                <li>{{ activity.get_action_display }}: {{ activity.timestamp|date:"F j, Y, H:i" }}</li>
            {% empty %}
                <li>Nenhuma atividade recente.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}