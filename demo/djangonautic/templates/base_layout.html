{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>AI4Lungs</title>
    <link rel="stylesheet" href= "{% static 'styles.css' %}">
</head>
<body>
<div class='wrapper'>
    <!-- base_layout.html -->
<header>
    <h1><a href="{% url 'home' %}" style="font-weight: 700;">AI4Lungs</a></h1>
    <nav>
        <ul>
            <li><a href="{% url 'home' %}" class="{% if request.path == '/' %}active{% endif %}" style="font-weight: 700;">Home</a></li>
            {% if user.is_authenticated %}
                <li><a href="{% url 'profile' %}" class="{% if request.path == '/profile/' %}active{% endif %}" style="font-weight: 700;">Profile</a></li>
                <li><a href="{% url 'accounts:pacientes' %}" class="{% if request.path == '/accounts/pacientes/' %}active{% endif %}" style="font-weight: 700;">Patients</a></li>
                <li>
                    <form class="logout-link" action="{% url 'accounts:logout' %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="{% if request.path == '/accounts/logout/' %}active{% endif %}" style="font-weight: 700;">Logout</button>
                    </form>
                </li>
            {% else %}
                <li><a href='{% url "accounts:login" %}' class="{% if request.path == '/accounts/login/' %}active{% endif %}" style="font-weight: 700;">Login</a></li>
                <li><a href='{% url "accounts:signup" %}' class="{% if request.path == '/accounts/signup/' %}active{% endif %}" style="font-weight: 700;">Signup</a></li>
            {% endif %}
        </ul>
    </nav>
</header>

<!-- caixa de confirmação de logout -->
<div class="modal" id="logoutModal">
    <div class="modal-content">
        <h2>Are you sure you want to log out from AI4LUNGS?</h2>
        <form action="{% url 'accounts:logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" id="confirm-logout">Yes, Logout</button>
        </form>
        <button id="cancel-logout">Cancel</button>
    </div>
</div>

    {% block content %}
    {% endblock %}
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var logoutButton = document.querySelector('.logout-link button');
        var modal = document.getElementById('logoutModal');
        var cancelButton = document.getElementById('cancel-logout');

        // Exibir o modal quando o botão de logout for clicado
        logoutButton.addEventListener('click', function (event) {
            event.preventDefault();  // Previne o envio do formulário diretamente
            modal.style.display = 'flex';  // Exibe o modal
        });

        // Fechar o modal quando o botão de cancelar for clicado
        cancelButton.addEventListener('click', function () {
            modal.style.display = 'none';  // Oculta o modal
        });
    });
</script>
</body>
</html>