{% extends 'base_layout.html' %}

{% load static %}

{% block content %}
  <h2>Editar Perfil</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div>
      <label for="id_username">Nome de Usuário:</label>
      {{ user_form.username }}
    </div>

    <div>
      <label for="id_email">Email:</label>
      {{ user_form.email }}
    </div>

    <div>
      <label for="id_profile_picture">Foto de Perfil:</label>
      {% if user.userprofile.profile_picture %}
        <img src="{{ user.userprofile.profile_picture.url }}" alt="Foto de Perfil" width="100" height="100">
      {% else %}
        <img src="{% static 'default-profile.png' %}" alt="Imagem padrão" width="100" height="100">
      {% endif %}
      {{ profile_form.profile_picture }}
    </div>
    
    {% if user_form.errors %}
    <div class="form-errors">
        <ul>
            {% for field in user_form %}
                {% for error in field.errors %}
                    <li><strong>{{ field.name|capfirst }}:</strong> {{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
{% endif %}

    <button type="submit">Salvar Alterações</button>
  </form>
  <br>
  <a href="{% url 'profile' %}">Voltar ao Perfil</a>
{% endblock %}
